{% extends "base/base.html" %}
{% load static %}

<!-- 追加のCSSを読み込むブロック -->
{% block extra_styles %}
    <link rel="stylesheet" href="{% static 'app/css/form.css' %}">
{% endblock %}

{% block body %}
    <div class="container mt-5">
        <h2>ここはform.htmlです</h2>
        <form method="POST" enctype="multipart/form-data">
            {% csrf_token %} <!-- 絶対必要 -->
            
            <!-- 料理タイトル -->
            <div class="form-group">
                <label for="id_recipe_title">料理タイトル</label>
                {{ form.recipe_title }}
            </div>

            <!-- 完成後の写真 -->
            <div class="form-group">
                <label for="id_recipe_image">料理写真</label>
                {{ form.recipe_image }}
            </div>

            <!-- 説明欄 -->
            <div class="form-group">
                <label for="id_detail_text">料理説明</label>
                {{ form.detail_text }}
            </div>

            <!-- 主菜・副菜・主食・菓子 -->
            <div class="form-group">
                <label for="id_genre">ジャンル</label>
                {{ form.genre }}
            </div>


            <!-- 材料フォーム -->
            <h3>材料</h3>
            <div class="form-group">
                <label for="id_material">材料名</label>
                {{ ingredient_form.material }}
            </div>

            <div class="form-group">
                <label for="id_amount">分量</label>
                {{ ingredient_form.amount }}
            </div>


            <!-- ステップフォーム -->
            <h3>作り方</h3>
            <div id="step-form-container">
                <div class="form-group">
                     <!-- ステップ番号のフィールドは隠しておく -->
                    <input type="hidden" name="step_number" value="1">
                    <label for="id_step_text">作り方 1</label>
                    {{ step_form.step_text }}
                </div>
            </div>

            <div class="form-group">
                <label for="id_step_image">作り方の写真</label>
                {{ step_form.step_image }}
            </div>

            <div class="form-group">
                <label for="id_step_video">作り方の動画</label>
                {{ step_form.step_video }}
            </div>
            

             <!-- ステップ追加ボタン -->
            <button type="button" class="btn btn-secondary" onclick="addStep()">+ ステップを追加</button>
            
             <!-- フォーム送信ボタン -->
            <button type="submit" class="btn btn-primary">保存</button>
        </form>
    </div>
{% endblock %}

 <!-- 追加のjsを読み込むブロック -->
{% block extra_scripts %}
    <script src="{% static 'app/js/form.js' %}"></script>
{% endblock %}